(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{122:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return p}));var r=n(1),a=n(6),o=(n(0),n(146)),i={id:"promise",title:"Handling promises",sidebar_label:"Handling promise"},s={id:"promise",title:"Handling promises",description:"## toast.promise",source:"@site/docs/promise.md",permalink:"/react-toastify/promise",editUrl:"https://github.com/fkhadra/react-toastify-doc/edit/master/docs/promise.md",sidebar_label:"Handling promise",sidebar:"someSidebar",previous:{title:"Remove toast programmatically",permalink:"/react-toastify/remove-toast"},next:{title:"Icons",permalink:"/react-toastify/icons"}},c=[{value:"toast.promise",id:"toastpromise",children:[]},{value:"toast.loading",id:"toastloading",children:[]}],l={rightToc:c};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"toastpromise"},"toast.promise"),Object(o.b)("img",{width:"400",alt:"v8-promise",src:"https://user-images.githubusercontent.com/5574267/130862557-8d13ddf0-c6bf-4f52-968a-1d91c62b6016.png"}),Object(o.b)("img",{width:"400",alt:"v8-promise-resolved",src:"https://user-images.githubusercontent.com/5574267/130862554-652397ed-1b1e-40d4-a250-c38734ec8e5d.png"}),Object(o.b)("p",null,"The library exposes a ",Object(o.b)("inlineCode",{parentName:"p"},"toast.promise")," function. Supply a promise and the notification will be updated if it resolves or fails. When the promise is pending a spinner is displayed."),Object(o.b)("p",null,"Let's start with a simple example"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-tsx"}),"const resolveAfter3Sec = new Promise(resolve => setTimeout(resolve, 3000));\ntoast.promise(\n    resolveAfter3Sec,\n    {\n      pending: 'Promise is pending',\n      success: 'Promise resolved \ud83d\udc4c',\n      error: 'Promise rejected \ud83e\udd2f'\n    }\n)\n")),Object(o.b)("p",null,"Displaying a simple message is what you would want to do in 90% of cases. But what if the message you want to display depends on the promise response, what if you want to change some options for the error notification? Rest assured, under the hood, the library uses ",Object(o.b)("inlineCode",{parentName:"p"},"toast.update"),". Thanks to this, you have full control over each notification."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-tsx"}),'const resolveWithSomeData = new Promise(resolve => setTimeout(() => resolve("world"), 3000));\ntoast.promise(\n    resolveAfter3Sec,\n    {\n      pending: {\n        render(){\n          return "I\'m loading"\n        },\n        icon: false,\n      },\n      success: {\n        render({data}){\n          return `Hello ${data}`\n        },\n        // other options\n        icon: "\ud83d\udfe2",\n      },\n      error: {\n        render({data}){\n          // When the promise reject, data will contains the error\n          return <MyErrorComponent message={data.message} />\n        }\n      }\n    }\n)\n')),Object(o.b)("div",{className:"admonition admonition-info alert alert--info"},Object(o.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(o.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"Because you have the full power of ",Object(o.b)("inlineCode",{parentName:"h5"},"toast.update"),", you can even supply a custom transition if you want \ud83e\udd2f")),Object(o.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("img",{width:"300",alt:"v8-promise-resolved",src:"https://user-images.githubusercontent.com/5574267/130869645-586777a3-3326-4664-917e-a13aee367c43.gif"}))),Object(o.b)("h2",{id:"toastloading"},"toast.loading"),Object(o.b)("p",null,"If you want to take care of each step yourself you can use ",Object(o.b)("inlineCode",{parentName:"p"},"toast.loading")," and update the notification yourself."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-tsx"}),'const id = toast.loading("Please wait...")\n//do something else\ntoast.update(id, { render: "All is good", type: "success" });\n')))}p.isMDXComponent=!0},146:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return b}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),p=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s({},t,{},e)),n},d=function(e){var t=p(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},u=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=p(n),u=r,b=d["".concat(i,".").concat(u)]||d[u]||m[u]||o;return n?a.a.createElement(b,s({ref:t},l,{components:n})):a.a.createElement(b,s({ref:t},l))}));function b(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);